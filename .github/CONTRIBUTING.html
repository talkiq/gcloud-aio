<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Contributing to gcloud-aio &#8212; gcloud-aio  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Releasing New Versions" href="RELEASE.html" />
    <link rel="prev" title="taskqueue.queue" href="../autoapi/taskqueue/queue/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="contributing-to-gcloud-aio">
<h1>Contributing to <code class="docutils literal notranslate"><span class="pre">gcloud-aio</span></code><a class="headerlink" href="#contributing-to-gcloud-aio" title="Link to this heading">¶</a></h1>
<p>Thanks for contributing to <code class="docutils literal notranslate"><span class="pre">gcloud-aio</span></code>! We appreciate contributions of any
size and hope to make it easy for you to dive in. Here’s the thousand-foot
overview of how we’ve set this project up.</p>
<section id="local-development">
<h2>Local Development<a class="headerlink" href="#local-development" title="Link to this heading">¶</a></h2>
<p>All local development is done via <a class="reference external" href="https://python-poetry.org/">poetry</a>. For any subproject, you can
install the development environment with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd &lt;project&gt;/</span>
<span class="go">poetry install</span>
</pre></div>
</div>
<p>And run tests with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">poetry run pytest  # run all tests</span>
<span class="go">poetry run pytest tests/unit  # unit tests only</span>
<span class="go">poetry run pytest tests/integration  # integration tests only</span>
</pre></div>
</div>
</section>
<section id="aio-and-rest">
<h2><code class="docutils literal notranslate"><span class="pre">aio</span></code> and <code class="docutils literal notranslate"><span class="pre">rest</span></code><a class="headerlink" href="#aio-and-rest" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">gcloud-aio-*</span></code> and <code class="docutils literal notranslate"><span class="pre">gcloud-rest-*</span></code> are in a shared codebase; the later is
autogenerated from the former in CI or via the <code class="docutils literal notranslate"><span class="pre">bin/build-rest</span></code> script. You
may need to keep this in mind while developing; all code will need to be
generateable into both module trees and runnable without asyncio (though there
are some conversion scripts we run to make things a bit more ergonomic –
you’re generally safe to write standard asyncio code and rely on the
conversion script). Feel free to ping a maintainer if you’re having issues
with this!</p>
<p>To build and test against the <code class="docutils literal notranslate"><span class="pre">gcloud-rest</span></code> projects, you can run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./bin/build-rest</span>

<span class="go">cd build/&lt;project&gt;/</span>
<span class="gp"># </span>run<span class="w"> </span>the<span class="w"> </span>above<span class="w"> </span>install<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>commands<span class="w"> </span>as<span class="w"> </span>per<span class="w"> </span>normal
</pre></div>
</div>
<p>Note that if you want modify anything in a <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file, running the
<code class="docutils literal notranslate"><span class="pre">bin/build-rest</span></code> script and committing the resulting changes (ie. to the
<code class="docutils literal notranslate"><span class="pre">pyproject.rest.toml</span></code> file) is essential! This must be done after having run
the normal <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">lock</span></code> / <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">update</span></code> / etc command.</p>
<section id="submitting-changes">
<h3>Submitting Changes<a class="headerlink" href="#submitting-changes" title="Link to this heading">¶</a></h3>
<p>Please send us a <a class="reference external" href="https://github.com/talkiq/gcloud-aio/pull/new/master">Pull Request</a> with a clear list of what you’ve done. When
you submit a PR, we’d appreciate test coverage of your changes (and feel free
to test other things; we could always use more and better tests!).</p>
<p>Please make sure all tests pass and your commits are atomic (one feature per
commit).</p>
<p>Always write a clear message for your changes. We think the
<a class="reference external" href="https://github.com/conventional-changelog/conventional-changelog">conventional changelog</a> message format is pretty cool and try to stick to it
as best we can (we even generate release notes from it automatically!).</p>
<p>Roughly speaking, we’d appreciate if your commits looked list this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">feat(taskqueue): implemented task queue manager</span>

<span class="go">Created gcloud.aio.taskqueue.TaskManager for an abstraction layer around</span>
<span class="go">renewing leases on pull-queue tasks. Handles auto-renewal and async</span>
<span class="go">processing.</span>
</pre></div>
</div>
<p>The first line is the most specific in this format, it should have the format
<code class="docutils literal notranslate"><span class="pre">type(project):</span> <span class="pre">message</span></code>, where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> is one of <code class="docutils literal notranslate"><span class="pre">feat</span></code>, <code class="docutils literal notranslate"><span class="pre">fix</span></code>, <code class="docutils literal notranslate"><span class="pre">docs</span></code>, <code class="docutils literal notranslate"><span class="pre">refactor</span></code>, <code class="docutils literal notranslate"><span class="pre">style</span></code>,
<code class="docutils literal notranslate"><span class="pre">perf</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span></code>, or <code class="docutils literal notranslate"><span class="pre">chore</span></code> - <code class="docutils literal notranslate"><span class="pre">project</span></code> is <code class="docutils literal notranslate"><span class="pre">auth</span></code>, <code class="docutils literal notranslate"><span class="pre">bigquery</span></code>,
<code class="docutils literal notranslate"><span class="pre">datastore</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">message</span></code> is a concise description of the patch and brings the line to no
more than 72 characters</p></li>
</ul>
</section>
</section>
<section id="pr-tests">
<h2>PR Tests<a class="headerlink" href="#pr-tests" title="Link to this heading">¶</a></h2>
<p>Note that some integration tests require authentication with Google. Since we
don’t want to expose our private keys to the world, this means your PR tests
might fail for that subset of test cases when you submit your changes.</p>
<p>Long-term, we’d like to switch all such integration tests to using Google
<a class="reference external" href="https://cloud.google.com/sdk/gcloud/reference/emulators">emulators</a> and would appreciate any help in getting us closer to that goal!
Note that unfortunately Google has not yet release emulators for all the
features we have under test, so we’ll not yet be able to entirely eliminate
this problem.</p>
<p>In the meantime, we are able to manually trigger integration tests for you on
any specific commit. Please feel free to add a comment requesting we do so!</p>
<section id="coding-conventions">
<h3>Coding Conventions<a class="headerlink" href="#coding-conventions" title="Link to this heading">¶</a></h3>
<p>We use <a class="reference external" href="http://pre-commit.com/">pre-commit</a> to manage our coding conventions and linting. You can
install it with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pre-commit</span></code> and set it to run pre-commit hooks
for <code class="docutils literal notranslate"><span class="pre">gcloud-aio</span></code> by running <code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">install</span></code>. The same linters get run
in CI against all changesets.</p>
<p>You can also run <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> in an ad-hoc fashion by calling
<code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">run</span> <span class="pre">--all-files</span></code>.</p>
<p>Other than the above enforced standards, we like code that is easy-to-read for
any new or returning contributors with relevant comments where appropriate.</p>
</section>
<section id="releases">
<h3>Releases<a class="headerlink" href="#releases" title="Link to this heading">¶</a></h3>
<p>If you are a maintainer looking to release a new version, see our
<a class="reference external" href="https://github.com/talkiq/gcloud-aio/blob/master/.github/RELEASE.rst">release documentation</a>.</p>
<p>Thanks for your contribution!</p>
<p>With love,
Vi Engineering</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">gcloud-aio</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../autoapi/auth/index.html">auth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/bigquery/index.html">bigquery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/datastore/index.html">datastore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/kms/index.html">kms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/pubsub/index.html">pubsub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/storage/index.html">storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/taskqueue/index.html">taskqueue</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing to <code class="docutils literal notranslate"><span class="pre">gcloud-aio</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="RELEASE.html">Releasing New Versions</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../autoapi/taskqueue/queue/index.html" title="previous chapter">taskqueue.queue</a></li>
      <li>Next: <a href="RELEASE.html" title="next chapter">Releasing New Versions</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2017, TalkIQ.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.0.4</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/.github/CONTRIBUTING.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>